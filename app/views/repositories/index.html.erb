<div class="container ">
    <% if false %>
        <div class="toast" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header">
            <img src="..." class="rounded mr-2" alt="...">
            <strong class="mr-auto">Notification</strong>
            <small>Just now</small>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="toast-body">
            <p id=notice><%= notice %></p>
          </div>
        </div>
    <% end %>

    <div class="row">
        <div class="col-12 col-sm-12 py-5 px-5 ">
            <h1 class="text-center">Repositories</h1>
        </div>
    </div>1
    <div class="row bg-light">
      <%= form_for repositories_path, method: :get do |f| %>
        Desde:
        <%= f.date_field :from, as: :date %>
        Hasta:
        <%= f.date_field :until, as: :date %>
        <%= submit_tag "Search" %>
      <% end %>

      <%= params.inspect %>

        <div class="col-12 py-5 px-5 ">
            <div class="dropdown allign-center">
                <button class="btn btn-secondary dropdown-toggle mx-auto" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Organizations
                </button>

            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <% @orgs.each do |org| %>
                 <span id="<%=org.name%>_selector" class="dropdown-item" href=""><%=org.name%></span>
              <% end %>
            </div>
            </div>
        </div>

                    <div class="container-fluid">
                    </div>
                    <div class="list-group">
                        <ul>
                            <% @repositories.each do |repository| %>


                                    <li class="container-fluid list-group-item">
                                        <div class="row">
                                            <% if Repository.where(github_id: repository.github_id).any? %>
                                                <div class="col-4">
                                                  <strong><a href="/repositories/<%= Repository.where(github_id: repository.github_id).pluck(:id)[0]%>"><%=repository.name%></a></strong>
                                                </div>
                                                <div class="col-4">
                                                    <em><%= repository.url %></em>
                                                </div>
                                                <div class="col-4 ">
                                                    <%= link_to 'Delete', repository, class:"float-right", method: :delete, data: { confirm: 'Are you sure?' } %>
                                                </div>
                                            <% else %>

                                                <div class="col-4">
                                                    <p><%=repository.name%></p>
                                                </div>
                                                <div class="col-4">
                                                    <em><%= repository.url %></em>
                                                </div>
                                                <div class="col-4">
                                                    <%= form_for @repo do |f| %>
                                                    <%= f.hidden_field :github_id, value: repository.github_id %>
                                                    <%= f.hidden_field :name, value: repository.name %>
                                                    <%= f.hidden_field :url, value: repository.url %>
                                                    <%= f.hidden_field :full_name, value: repository.full_name %>
                                                    <%= f.hidden_field :description, value: repository.description %>
                                                    <%= f.hidden_field :size, value: repository.size %>
                                                    <%= f.hidden_field :collaborator, value: repository.collaborator %>
                                                    <%= button_tag 'Add', class: 'button is-success float-right' %>
                                                </div>


                                            <% end %>
                                        </div>
                                    </li>
                                <% end %>
                        </ul>
                    </div>
                </div>

        <% end %>
    </div>

</div>



<br>
<% if false %>
<%= link_to 'New Repository', new_repository_path %>
<% end %>

<!--<script>-->

<!--    $(document).ready(function() {-->
<!--        $('.dropdown-item').each(function(){-->
<!--            $(this).css({'cursor': 'pointer'});-->
<!--        });-->


<!--        $('.list_repos').each(function(index, elem){-->
<!--            let header_id = "#" + $(this).attr("id") + "_header";-->
<!--            if(index === 0){-->
<!--                $(header_id).show();-->
<!--                $(this).show();-->
<!--            }else{-->
<!--                $(this).hide();-->
<!--                $(header_id).hide();-->
<!--            }-->
<!--        });-->

<!--        $('.dropdown-item').click(function(){-->
<!--            var org_selector_id = $(this).attr("id");-->
<!--            var org_id = org_selector_id.substring(0, org_selector_id.length - 9);-->
<!--            $('.list_repos').each(function(index, value){-->
<!--                let header_id = "#" + $(this).attr("id") + "_header";-->
<!--                if($(this).attr('id') == org_id){-->
<!--                    $(header_id).show();-->
<!--                    $(this).show();-->
<!--                }else{-->
<!--                    $(header_id).hide();-->
<!--                    $(this).hide();-->
<!--                }-->
<!--            });-->
<!--        });-->
<!--    });-->

<!--</script>-->
